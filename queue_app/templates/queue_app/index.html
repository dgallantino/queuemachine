{% extends "queue_app/base.html" %}
{% block javascript %}
	<script type="text/javascript">
			$('body').on('click','.content_button', function(event){
				var id = $(this).attr('id');
				console.log();
				console.log(id);
				$.ajax({
					url : "{% url "printticket" 9999 %}".replace('9999', id.toString()),
					type : "GET",
					success : print_ticket,
					error : function(){console.log("");}
				});
			});
		function print_ticket(json){
			console.log(json);
			$('#queue_service').text(json.service.name);
			$('#qeueu_number').text(String(json.number));
			$('#queue_time').text(json.date_created);
			window.print();
		}

	</script>
{% endblock %}

{% block content %}
	<div class="section_to_print">
		{% include 'queue_app/print_place_holder.html' %}
	</div>
	<div class="menu">
		<table class="content_table">
		{% for service in object_list %}
			<tr class="content_tr">
				<td class="content_tr">
					<input type="button" class="content_button" value="{{ service }}" id="{{service.id}}">
				</td>
			</tr>
		{% endfor %}
		</table>
	</div>
{% endblock %}
