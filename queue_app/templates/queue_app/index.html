{% extends "queue_app/base.html" %}
{% block javascript %}
	<script>
		{% for service in object_list %}
			$('#{{service.id}}').on('click', function(event){
				$.ajax({
					url : "{% url 'printticket' service.id %}",
					type : "GET",
					success : print_ticket,
					error : function(){console.log("{% url 'printticket' service.id %}");}
				});
			});
		{% endfor %}
		function print_ticket(json){
			console.log(json);
			$('#queue_service').text(json.service);
			$('#qeueu_number').text(String(json.number));
			$('#queue_time').text(json.created);
			window.print();
		}
	</script>
{% endblock %}

{% block content %}
	<div class="section_to_print">
		{% include 'queue_app/print_place_holder.html' %}
	</div>
	<div class="menu">
		<table class="content_table">
		{% for service in object_list %}
			<tr class="content_tr">
				<td class="content_tr">
					<input type="button" class="content_button" value="{{ service }}" id={{service.id}}>
				</td>
			</tr>
		{% endfor %}
		</table>
	</div>
{% endblock %}
